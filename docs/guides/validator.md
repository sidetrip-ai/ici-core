# Validator Component Guide

## Overview

A Validator checks the quality of responses generated by the system. It ensures that responses are accurate and relevant before being delivered to the user.

The Validator is an optional component - you don't need to implement a custom Validator when simply connecting a new data source.

## Interface

All validators must implement the `Validator` interface:

```python
class Validator(ABC):
    @abstractmethod
    async def initialize(self) -> None:
        """Initialize the validator with configuration parameters."""
        pass
        
    @abstractmethod
    async def validate(
        self, 
        query: str, 
        response: Dict[str, Any], 
        documents: List[Dict[str, Any]],
        **kwargs
    ) -> Dict[str, Any]:
        """
        Validate the generated response against the query and documents.
        
        Args:
            query: The user's original query
            response: The generated response to validate
            documents: The documents used to generate the response
            **kwargs: Additional parameters for validation
            
        Returns:
            Dict[str, Any]: Validation result with potentially modified response
        """
        pass
```

## Basic Implementation

A simple validator might check relevance and add validation metadata:

```python
async def validate(
    self, 
    query: str, 
    response: Dict[str, Any], 
    documents: List[Dict[str, Any]],
    **kwargs
) -> Dict[str, Any]:
    """Basic validation of response."""
    
    # Extract the answer
    answer = response.get("answer", "")
    
    # Simple validation check
    is_valid = len(answer) > 0
    
    # Create modified response with validation metadata
    modified_response = response.copy()
    if "metadata" not in modified_response:
        modified_response["metadata"] = {}
        
    modified_response["metadata"]["validation"] = {
        "status": "passed" if is_valid else "failed"
    }
    
    # Return validation result
    result = {
        "is_valid": is_valid,
        "modified_response": modified_response,
        "warnings": [] if is_valid else ["Empty response detected"]
    }
    
    return result
```

## Configuration

In your `config.yaml` file, you can add basic configuration:

```yaml
validators:
  default:
    enabled: true
```

## Conclusion

The Validator component performs basic quality checks on generated responses. For most use cases, the default implementation will be sufficient.

If you are connecting a new data source, you typically won't need to modify this component at all.
